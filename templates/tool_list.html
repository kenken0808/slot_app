<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>けんけんスロット分析ツール一覧</title>

  <!-- OGP / Twitterカード -->
  <meta property="og:type" content="website">
  <meta property="og:title" content="けんけんスロット分析ツール一覧">
  <meta property="og:description" content="機種ごとのnote紹介記事とツールへのリンクをまとめたポータルページです。">
  <!-- ★ og:url を /tool/list に修正 -->
  <meta property="og:url" content="https://kenkentools.com/tool/list">
  <meta property="og:image" content="{{ url_for('static', filename='ogp.jpg', _external=True) }}">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="けんけんスロット分析ツール 一覧">
  <meta name="twitter:description" content="機種ごとのnote紹介記事とツールへのリンクをまとめたポータルページです。">
  <meta name="twitter:image" content="{{ url_for('static', filename='ogp.jpg', _external=True) }}">

  <!-- ✅ GA4：ページビューのみ（page_path を /tool/list に修正） -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-HXM85ZV043"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){ dataLayer.push(arguments); }
    gtag('js', new Date());
    gtag('config', 'G-HXM85ZV043', { 'page_path': '/tool/list', 'page_title': 'ツール一覧' });
  </script>

  <style>
    body {
      font-family: "M PLUS Rounded 1c", system-ui, -apple-system, Segoe UI, Roboto, "Hiragino Kaku Gothic ProN", "Noto Sans JP", Meiryo, sans-serif;
      background: #f9fafb;
      margin: 40px 16px 60px;
      color: #333;
    }

    /* タイトル */
    .title-wrap {
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 12px;
      margin-bottom: 24px;
    }
    .title-wrap img {
      width: 40px;
      height: 40px;
      border-radius: 10px;
      object-fit: cover;
      box-shadow: 0 2px 5px rgba(0,0,0,.15);
    }
    h1 {
      margin: 0;
      font-size: 20px;
      letter-spacing: .3px;
      text-align: center;
    }

    /* 検索 */
    #search {
      display: block;
      margin: 0 auto 18px;
      padding: 10px 12px;
      width: 100%;
      max-width: 520px;
      border: 1px solid #d1d5db;
      border-radius: 10px;
      background: #fff;
      outline: none;
      font-size: 14px;
    }

    /* 表 */
    .table-wrap {
      max-width: 1080px;
      margin: 0 auto;
      background: #fff;
      border: 1px solid #e5e7eb;
      border-radius: 14px;
      overflow: hidden;
      box-shadow: 0 6px 20px rgba(0,0,0,.06);
    }
    table {
      width: 100%;
      border-collapse: collapse;
      text-align: center; /* 全体中央揃え */
    }
    thead th {
      background: #f3f4f6;
      font-weight: 700;
      font-size: 14px;
      color: #374151;
      padding: 14px 12px;
      border-bottom: 1px solid #e5e7eb;
      text-align: center;
    }
    tbody td {
      border-bottom: 1px solid #e5e7eb;
      padding: 14px 12px;
      font-size: 15px;
      vertical-align: middle;
      text-align: center;
    }
    tbody tr:hover {
      background: #f9fafc;
    }
    .name {
      font-weight: 600;
      text-align: center; /* 機種名も中央に統一 */
    }
    a.link {
      display: inline-block;
      padding: 8px 12px;
      border: 1px solid #2563eb;
      color: #2563eb;
      text-decoration: none;
      border-radius: 10px;
      font-weight: 600;
      font-size: 13px;
      transition: .1s;
    }
    a.link:hover {
      background: #2563eb;
      color: #fff;
    }

    /* ★ スマホでも横一列を維持する修正 */
    @media (max-width:680px){
      thead { display: none; }          /* ヘッダーは隠す（行を軽く） */

      table {
        display: table;                 /* テーブル表示を維持 */
        width: 100%;
        border-collapse: collapse;
      }
      tbody tr {
        display: table-row;             /* 行を維持（縦積み防止） */
        border-bottom: 1px solid #e5e7eb;
      }
      tbody td {
        display: table-cell;            /* セルを維持（縦積み防止） */
        text-align: center;
        padding: 12px 8px;
        border-bottom: 1px solid #e5e7eb;
      }
      /* 擬似ラベルは不要（横並びのまま） */
      tbody td[data-label]::before { display: none; }

      /* タイトル縮小 */
      .title-wrap img { width: 32px; height: 32px; }
      h1 { font-size: 20px; }
    }
  </style>
</head>

<body>
  <!-- タイトル両側にアイコン -->
  <div class="title-wrap">
    <img src="{{ url_for('static', filename='icon.jpg') }}" alt="icon left">
    <h1>けんけんスロット分析ツール 一覧</h1>
    <img src="{{ url_for('static', filename='icon.jpg') }}" alt="icon right">
  </div>

  <input id="search" type="search" placeholder="機種名で検索">

  <div class="table-wrap">
    <table id="tool-table" aria-label="ツール一覧">
      <thead>
        <tr>
          <th>機種名</th>
          <th>紹介記事</th>
          <th>ツール</th>
        </tr>
      </thead>
      <tbody id="tool-tbody"></tbody>
    </table>
  </div>

  <script>
    const toolsData = [
      {
        name: "L 新鬼武者3",
        note: "https://note.com/kenslodata/n/n592917017aae",
        url:  "https://kenkentools.com/onimusya/paid"
      },
      {
        name: "L 主役は銭形5",
        note: "https://note.com/kenslodata/n/n14c453aae356",
        url:  "https://kenkentools.com/zenigata5/paid"
      },
      {
        name: "L アズールレーン THE ANIMETION",
        note: "https://note.com/kenslodata/n/n38b6be48a9da",
        url:  "https://kenkentools.com/azurlane/paid"
      },
      {
        name: "L ダーリン・イン・ザ・フランキス",
        note: "https://note.com/kenslodata/n/n6139b4291e69",
        url:  "https://kenkentools.com/franxx/paid"
      },
      {
        name: "L 咲-Saki-頂上決戦",
        note: "https://note.com/kenslodata/n/nda1d15f56223",
        url:  "https://kenkentools.com/saki/paid"
      },
      {
        name: "L 北斗の拳",
        note: "https://note.com/kenslodata",
        url:  "https://kenkentools.com/hokuto/paid"
      }
    ];

    const tbody = document.getElementById("tool-tbody");
    const search = document.getElementById("search");

    function makeLink(href, label) {
      return `<a class="link" href="${href}" target="_blank" rel="noopener noreferrer">${label}</a>`;
    }

    function renderTable(query = "") {
      tbody.innerHTML = "";
      const q = query.trim().toLowerCase();

      toolsData
        .filter(item => !q || item.name.toLowerCase().includes(q))
        .forEach(item => {
          const tr = document.createElement("tr");
          tr.innerHTML = `
            <td class="name" data-label="機種名">${item.name}</td>
            <td data-label="紹介記事">${makeLink(item.note, "note記事を見る")}</td>
            <td data-label="ツール">${makeLink(item.url, "ツールを開く")}</td>
          `;
          tbody.appendChild(tr);
        });
    }

    search.addEventListener("input", e => renderTable(e.target.value));
    renderTable();
  </script>
</body>
</html>
